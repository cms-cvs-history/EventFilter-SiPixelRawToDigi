process RawToDigiTest = {

  untracked PSet maxEvents = {untracked int32 input = -1}

   include "IORawData/SiPixelInputSources/data/PixelSLinkDataInputSource.cfi"
   replace PixelSLinkDataInputSource.fileNames={"file:/afs/cern.ch/cms/Tracker/Pixel/forward/ryd/PixelAlive_070106d.dmp"}

  include "CondCore/DBCommon/data/CondDBCommon.cfi"
  replace CondDBCommon.connect = "sqlite_file:/afs/cern.ch/user/c/chiochia/public/cabling.db"
  replace CondDBCommon.catalog = "file:/afs/cern.ch/user/c/chiochia/public/cablingCatalog.xml"
  replace CondDBCommon.timetype = "runnumber"
  replace CondDBCommon.DBParameters.messageLevel = 1
  replace CondDBCommon.DBParameters.authenticationPath="."
  es_source = PoolDBESSource {
    using CondDBCommon
    VPSet toGet={{string record="SiPixelFedCablingMapRcd" string tag="SiPixelFedCablingMap_v1"}}
  }




  # Tracker SimGeometryXML
  include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"
  
  # Tracker Geometry Builder
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
 
  # Tracker Numbering Builder
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  # Pixel RawToDigi conversion
  include "EventFilter/SiPixelRawToDigi/data/SiPixelRawToDigi.cfi"
  replace siPixelDigis.InputLabel = "source"
#  replace siPixelDigis.InputLabel = "siPixelRawData"
  replace siPixelDigis.Timing = false 

  # Message Logger	
   service = MessageLogger {
    untracked vstring destinations   = { "runRawToDigi.log" }
    untracked PSet runRawToDigi.log = { untracked string threshold = "DEBUG"}
    # untracked vstring debugModules = { "siPixelDigis"}
    untracked vstring debugModules = { " "}
   } 

  module outputdigi = PoolOutputModule {
    untracked string fileName = "OutputFile_Digi.root"
    untracked vstring outputCommands = { "drop *", "keep *_siPixelDigis_*_*"}
  }

  #Provide a scheduler path
  path p = { siPixelDigis }      
  endpath e = { outputdigi }

}
